@model MindLog.Models.ViewModels.MoodIndexViewModel

<h2>My Prevailing Mood: @Model.PrevMood</h2>

<div class="row mt-4">
    <!-- Αριστερά: Στατιστικά -->
    <div class="col-md-6">
        <h3>Statistics</h3>
        <table class="table table-sm table-bordered">
            <thead class="table-light">
                <tr>
                    <th>Mood</th>
                    <th>Count</th>
                    <th>Percentage</th>
                </tr>
            </thead>
            <tbody>
            @foreach (var stat in Model.Stats)
            {
                <tr>
                    <td>@stat.Mood</td>
                    <td>@stat.Count</td>
                    <td>@stat.Percentage %</td>
                </tr>
            }
            </tbody>
        </table>
    </div>

    <!-- Δεξιά: Chart -->
    <div class="col-md-6 d-flex justify-content-center align-items-center">
        <div style="width:300px; height:300px;">
            <canvas id="moodChart"></canvas>
        </div>
    </div>
</div>

@section Scripts {
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        var ctx = document.getElementById('moodChart').getContext('2d');
        var chart = new Chart(ctx, {
            type: 'pie',
            data: {
                labels: @Html.Raw(Newtonsoft.Json.JsonConvert.SerializeObject(Model.Stats.Select(s => s.Mood))),
                datasets: [{
                    data: @Html.Raw(Newtonsoft.Json.JsonConvert.SerializeObject(Model.Stats.Select(s => s.Count))),
                    backgroundColor: ['#f39c12', '#3498db', '#2ecc71', '#e74c3c', '#9b59b6']
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false
            }
        });
    </script>
}
